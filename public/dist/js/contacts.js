webpackJsonp([3],{49:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('Object.defineProperty(__webpack_exports__, "__esModule", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__sass_pages_contacts_sass__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__sass_pages_contacts_sass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__sass_pages_contacts_sass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__modules_auth__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__modules_bling__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__modules_callback__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__modules_popup__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__modules_search__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__modules_map__ = __webpack_require__(51);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nObject(__WEBPACK_IMPORTED_MODULE_4__modules_popup__["a" /* default */])(Object(__WEBPACK_IMPORTED_MODULE_2__modules_bling__["a" /* $ */])(\'.js-callback-popupShow\'), Object(__WEBPACK_IMPORTED_MODULE_2__modules_bling__["a" /* $ */])(\'.callback-popup\'));\r\nObject(__WEBPACK_IMPORTED_MODULE_3__modules_callback__["a" /* default */])(Object(__WEBPACK_IMPORTED_MODULE_2__modules_bling__["a" /* $ */])(\'#callback\'), Object(__WEBPACK_IMPORTED_MODULE_2__modules_bling__["a" /* $ */])(\'.callback-popup\'));\r\nObject(__WEBPACK_IMPORTED_MODULE_5__modules_search__["a" /* default */])(Object(__WEBPACK_IMPORTED_MODULE_2__modules_bling__["a" /* $ */])(\'.search\'));\r\nObject(__WEBPACK_IMPORTED_MODULE_6__modules_map__["a" /* default */])(Object(__WEBPACK_IMPORTED_MODULE_2__modules_bling__["a" /* $ */])(\'#map\'));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wdWJsaWMvYXNzZXRzL2pzL2NvbnRhY3RzLmpzP2FiZTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICcuLi9zYXNzL3BhZ2VzL2NvbnRhY3RzLnNhc3MnO1xyXG5pbXBvcnQgJy4vbW9kdWxlcy9hdXRoJztcclxuaW1wb3J0IHsgJCB9IGZyb20gJy4vbW9kdWxlcy9ibGluZyc7XHJcbmltcG9ydCBjYWxsYmFjayBmcm9tICcuL21vZHVsZXMvY2FsbGJhY2snO1xyXG5pbXBvcnQgc2hvd1BvcHVwIGZyb20gJy4vbW9kdWxlcy9wb3B1cCc7XHJcbmltcG9ydCB0eXBlQWhlYWQgZnJvbSAnLi9tb2R1bGVzL3NlYXJjaCc7XHJcbmltcG9ydCAnLi9tb2R1bGVzL2F1dGgnO1xyXG5pbXBvcnQgbWFrZU1hcCBmcm9tICcuL21vZHVsZXMvbWFwJztcclxuXHJcbnNob3dQb3B1cCgkKCcuanMtY2FsbGJhY2stcG9wdXBTaG93JyksICQoJy5jYWxsYmFjay1wb3B1cCcpKTtcclxuY2FsbGJhY2soJCgnI2NhbGxiYWNrJyksICQoJy5jYWxsYmFjay1wb3B1cCcpKTtcclxudHlwZUFoZWFkKCQoJy5zZWFyY2gnKSk7XHJcbm1ha2VNYXAoJCgnI21hcCcpKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3B1YmxpYy9hc3NldHMvanMvY29udGFjdHMuanNcbi8vIG1vZHVsZSBpZCA9IDQ5XG4vLyBtb2R1bGUgY2h1bmtzID0gMyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///49\n')},50:function(module,exports){eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wdWJsaWMvYXNzZXRzL3Nhc3MvcGFnZXMvY29udGFjdHMuc2Fzcz83YjEwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9wdWJsaWMvYXNzZXRzL3Nhc3MvcGFnZXMvY29udGFjdHMuc2Fzc1xuLy8gbW9kdWxlIGlkID0gNTBcbi8vIG1vZHVsZSBjaHVua3MgPSAzIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///50\n")},51:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_axios__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_axios__);\n\r\n\r\nconst mapOptions = {\r\n\tcenter: { lat: 54.7, lng: 55.9 },\r\n\tzoom: 5\r\n};\r\n\r\nfunction loadPlaces(map, lat = 54.7 , lng = 55.9) {\r\n\t__WEBPACK_IMPORTED_MODULE_0_axios___default.a.get(`/api/stores/near?lat=${lat}&lng=${lng}`).then( res => {\r\n\t\tconst places = res.data;\r\n\t\tif (!places.length) {\r\n\t\t\tmap.setCenter({lat: lat, lng: lng});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst bounds = new google.maps.LatLngBounds();\r\n\t\tconst infoWindow = new google.maps.InfoWindow();\r\n\r\n\t\tconst markers = places.map( place => {\r\n\t\t\tconst [ placeLng, placeLat ] = place.location.coordinates;\r\n\t\t\tconst position = { lat: placeLat, lng: placeLng };\r\n\t\t\tbounds.extend(position);\r\n\t\t\tconst marker = new google.maps.Marker({ map, position });\r\n\t\t\tmarker.place = place;\r\n\t\t\treturn marker;\r\n\t\t});\r\n\r\n\t\tmarkers.forEach( marker => marker.addListener(\'click\', function(){\r\n\t\t\t\tconst html = `<div class="store-popup">\r\n\t\t\t\t\t<a class="store-popup__link" href="/store/${this.place.slug}">\r\n\t\t\t\t\t\t<img class="store-popup__img" src="/uploads/${this.place.photo}" alt=${this.place.name}>\r\n\t\t\t\t\t\t<p class="store-popup__text"> ${this.place.name} - ${this.place.location.address}</p>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>`;\r\n\r\n\t\t\t\tinfoWindow.setContent(html);\r\n\t\t\t\tinfoWindow.open(map, this);\r\n\t\t\t}));\r\n\t\t\tmap.setCenter(bounds.getCenter());\r\n\t\t\tmap.fitBounds(bounds);\r\n\t});\r\n}\r\n\r\nfunction makeMap(mapDiv) {\r\n\tif (!mapDiv) return;\r\n\r\n\tconst map = new google.maps.Map(mapDiv, mapOptions);\r\n\r\n\tconst input = mapDiv.previousElementSibling;\r\n\r\n\tconst autocomplete = new google.maps.places.Autocomplete(input);\r\n\r\n\tif (input.value.length) {\r\n\t\tgoogle.maps.event.trigger(autocomplete, \'place_changed\');\r\n\t} else {\r\n\t\tloadPlaces(map);\r\n\t}\r\n\r\n\tautocomplete.addListener(\'place_changed\', () => {\r\n\t\tconst place = autocomplete.getPlace();\r\n\t\tloadPlaces(map, place.geometry.location.lat(), place.geometry.location.lng());\r\n\t});\r\n\r\n}\r\n\r\n/* harmony default export */ __webpack_exports__["a"] = (makeMap);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wdWJsaWMvYXNzZXRzL2pzL21vZHVsZXMvbWFwLmpzPzllZTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcclxuXHJcbmNvbnN0IG1hcE9wdGlvbnMgPSB7XHJcblx0Y2VudGVyOiB7IGxhdDogNTQuNywgbG5nOiA1NS45IH0sXHJcblx0em9vbTogNVxyXG59O1xyXG5cclxuZnVuY3Rpb24gbG9hZFBsYWNlcyhtYXAsIGxhdCA9IDU0LjcgLCBsbmcgPSA1NS45KSB7XHJcblx0YXhpb3MuZ2V0KGAvYXBpL3N0b3Jlcy9uZWFyP2xhdD0ke2xhdH0mbG5nPSR7bG5nfWApLnRoZW4oIHJlcyA9PiB7XHJcblx0XHRjb25zdCBwbGFjZXMgPSByZXMuZGF0YTtcclxuXHRcdGlmICghcGxhY2VzLmxlbmd0aCkge1xyXG5cdFx0XHRtYXAuc2V0Q2VudGVyKHtsYXQ6IGxhdCwgbG5nOiBsbmd9KTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0Y29uc3QgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcygpO1xyXG5cdFx0Y29uc3QgaW5mb1dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KCk7XHJcblxyXG5cdFx0Y29uc3QgbWFya2VycyA9IHBsYWNlcy5tYXAoIHBsYWNlID0+IHtcclxuXHRcdFx0Y29uc3QgWyBwbGFjZUxuZywgcGxhY2VMYXQgXSA9IHBsYWNlLmxvY2F0aW9uLmNvb3JkaW5hdGVzO1xyXG5cdFx0XHRjb25zdCBwb3NpdGlvbiA9IHsgbGF0OiBwbGFjZUxhdCwgbG5nOiBwbGFjZUxuZyB9O1xyXG5cdFx0XHRib3VuZHMuZXh0ZW5kKHBvc2l0aW9uKTtcclxuXHRcdFx0Y29uc3QgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7IG1hcCwgcG9zaXRpb24gfSk7XHJcblx0XHRcdG1hcmtlci5wbGFjZSA9IHBsYWNlO1xyXG5cdFx0XHRyZXR1cm4gbWFya2VyO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bWFya2Vycy5mb3JFYWNoKCBtYXJrZXIgPT4gbWFya2VyLmFkZExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0Y29uc3QgaHRtbCA9IGA8ZGl2IGNsYXNzPVwic3RvcmUtcG9wdXBcIj5cclxuXHRcdFx0XHRcdDxhIGNsYXNzPVwic3RvcmUtcG9wdXBfX2xpbmtcIiBocmVmPVwiL3N0b3JlLyR7dGhpcy5wbGFjZS5zbHVnfVwiPlxyXG5cdFx0XHRcdFx0XHQ8aW1nIGNsYXNzPVwic3RvcmUtcG9wdXBfX2ltZ1wiIHNyYz1cIi91cGxvYWRzLyR7dGhpcy5wbGFjZS5waG90b31cIiBhbHQ9JHt0aGlzLnBsYWNlLm5hbWV9PlxyXG5cdFx0XHRcdFx0XHQ8cCBjbGFzcz1cInN0b3JlLXBvcHVwX190ZXh0XCI+ICR7dGhpcy5wbGFjZS5uYW1lfSAtICR7dGhpcy5wbGFjZS5sb2NhdGlvbi5hZGRyZXNzfTwvcD5cclxuXHRcdFx0XHRcdDwvYT5cclxuXHRcdFx0XHQ8L2Rpdj5gO1xyXG5cclxuXHRcdFx0XHRpbmZvV2luZG93LnNldENvbnRlbnQoaHRtbCk7XHJcblx0XHRcdFx0aW5mb1dpbmRvdy5vcGVuKG1hcCwgdGhpcyk7XHJcblx0XHRcdH0pKTtcclxuXHRcdFx0bWFwLnNldENlbnRlcihib3VuZHMuZ2V0Q2VudGVyKCkpO1xyXG5cdFx0XHRtYXAuZml0Qm91bmRzKGJvdW5kcyk7XHJcblx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VNYXAobWFwRGl2KSB7XHJcblx0aWYgKCFtYXBEaXYpIHJldHVybjtcclxuXHJcblx0Y29uc3QgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChtYXBEaXYsIG1hcE9wdGlvbnMpO1xyXG5cclxuXHRjb25zdCBpbnB1dCA9IG1hcERpdi5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xyXG5cclxuXHRjb25zdCBhdXRvY29tcGxldGUgPSBuZXcgZ29vZ2xlLm1hcHMucGxhY2VzLkF1dG9jb21wbGV0ZShpbnB1dCk7XHJcblxyXG5cdGlmIChpbnB1dC52YWx1ZS5sZW5ndGgpIHtcclxuXHRcdGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIoYXV0b2NvbXBsZXRlLCAncGxhY2VfY2hhbmdlZCcpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRsb2FkUGxhY2VzKG1hcCk7XHJcblx0fVxyXG5cclxuXHRhdXRvY29tcGxldGUuYWRkTGlzdGVuZXIoJ3BsYWNlX2NoYW5nZWQnLCAoKSA9PiB7XHJcblx0XHRjb25zdCBwbGFjZSA9IGF1dG9jb21wbGV0ZS5nZXRQbGFjZSgpO1xyXG5cdFx0bG9hZFBsYWNlcyhtYXAsIHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCgpLCBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sbmcoKSk7XHJcblx0fSk7XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBtYWtlTWFwO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vcHVibGljL2Fzc2V0cy9qcy9tb2R1bGVzL21hcC5qc1xuLy8gbW9kdWxlIGlkID0gNTFcbi8vIG1vZHVsZSBjaHVua3MgPSAzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///51\n')}},[49]);